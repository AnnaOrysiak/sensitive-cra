(this["webpackJsonpsensitive-cra"]=this["webpackJsonpsensitive-cra"]||[]).push([[0],{25:function(e,t,a){},32:function(e,t,a){e.exports=a(64)},37:function(e,t,a){},41:function(e,t,a){},44:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),s=a.n(o),c=(a(37),a(2)),l=a(3),i=a(5),u=a(4),m=a(6),h=a(11),p=a(16),f=a(13),d=(a(41),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"header"}))}),g=a(9),v=(a(44),function(){return r.a.createElement("div",{className:"loading-circle"})}),E=function(e){var t=e.stories,a=e.navigationHandler,n=[],o=[];function s(e,t){var n=[];return t.filter((function(t){return t.title===e&&n.push(r.a.createElement("li",{key:t._id},r.a.createElement(h.b,{to:"/sensitive-cra/story/".concat(t._id),id:t._id,onClick:a,className:t.chapter_title?"storyBox__item":"storyBox__item storyBox__item--short storyBox__title"},t.chapter_title?t.chapter_title:t.title))),t.title===e})),n}return function(){for(var e=[],a=0;a<t.length;a++)0===a&&t[a].chapter_title?e.push(t[a].title):t[a].title!==t[a-1].title&&t[a].chapter_title?e.push(t[a].title):t[a].title!==t[a-1].title&&o.push(t[a].title);return e}().forEach((function(e,a){n.push(r.a.createElement("li",{key:e+a,className:"storyBox storyBox--long"},r.a.createElement("h3",{className:"storyBox__title"},e),r.a.createElement("ul",{className:"storyBox__list"},s(e,t))))})),o.forEach((function(e,a){n.push(r.a.createElement("li",{className:"storyBox",key:e+a},r.a.createElement("h3",null,s(e,t))))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",null,n))},y={baseUrl:"https://sensitive-express.herokuapp.com/api/",baseCorsUrl:"https://cors-anywhere.herokuapp.com/https://sensitive-express.herokuapp.com/api/",adminUrl:"https://sensitive-express.herokuapp.com/api/admin/",adminCorsUrl:"https://cors-anywhere.herokuapp.com/https://sensitive-express.herokuapp.com/api/admin/"},b=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"getAllStories",value:function(){return fetch("".concat(y.baseCorsUrl,"stories")).then((function(e){if(e.ok)return e.json();throw new Error("error ",e.status)})).catch((function(e){return e}))}},{key:"getStoryById",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch("".concat(y.baseCorsUrl,"story/").concat(e)).then((function(e){if(e.ok)return e.json();throw new Error("error ",e.status)})).catch((function(e){return e}))}},{key:"getStoriesByAuthor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return fetch("".concat(y.adminCorsUrl,"stories/").concat(e)).then((function(e){if(e.ok)return e.json();throw new Error("error ",e.status)})).catch((function(e){return e}))}},{key:"deleteStoryById",value:function(e){return fetch("".concat(y.adminCorsUrl,"story/delete/").concat(e)).then((function(t){if(console.log(e),t.ok)return t.json();throw new Error("error ",t.status)})).catch((function(e){return e}))}}]),e}(),_=(a(47),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={active:!1,stories:[]},a.navigationHandler=function(){a.setState((function(e){return{active:!e.active}}))},a.checkPermission=function(){return localStorage.getItem("state")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.getAllStories().then((function(t){return e.setState({stories:t})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.state.active?"btn menu-button active":"btn menu-button",onClick:this.navigationHandler},r.a.createElement("span",{className:"menu-button__bar"}),r.a.createElement("span",{className:"menu-button__bar"}),r.a.createElement("span",{className:"menu-button__bar"})),r.a.createElement("div",{className:this.state.active?"menu active":"menu"},r.a.createElement("section",{className:"icons"},r.a.createElement(h.b,{to:"/sensitive-cra/",onClick:this.navigationHandler,exact:!0},r.a.createElement(g.a,{icon:"home",size:"2x"})),this.checkPermission()?r.a.createElement(h.b,{to:"/sensitive-cra/logout",onClick:this.navigationHandler},r.a.createElement(g.a,{icon:"user-slash",size:"2x"})):r.a.createElement(h.b,{to:"/sensitive-cra/admin",onClick:this.navigationHandler},r.a.createElement(g.a,{icon:"user",size:"2x"})),r.a.createElement("button",{className:"btn",onClick:this.props.changeColor},r.a.createElement(g.a,{icon:this.props.lightMode?"moon":"sun",size:"2x"}))),r.a.createElement("h3",{className:"menu__header"},"Opowiadania"),this.state.stories.length?r.a.createElement(E,{stories:this.state.stories,navigationHandler:this.navigationHandler}):r.a.createElement(v,null)))}}]),t}(n.Component)),w=a(14),N=function(e){var t=e.title,a=e.description,n=e.date,o=new Date(n);return r.a.createElement("article",{className:"articleNews"},r.a.createElement("h3",null,t),r.a.createElement("span",null,o.toLocaleDateString()),r.a.createElement("p",{className:"articleNews__description"},a))},j=localStorage.getItem("state")?y.adminCorsUrl:y.baseCorsUrl,k=function(){function e(){Object(c.a)(this,e)}return Object(l.a)(e,null,[{key:"getAllNews",value:function(){return fetch("".concat(j,"news")).then((function(e){if(e.ok)return e.json();throw new Error("error ",e.status)})).catch((function(e){return e}))}},{key:"deleteNewsById",value:function(e){return fetch("".concat(j,"news/delete/").concat(e)).then((function(e){if(e.ok)return e.json();throw new Error("error ",e.status)})).catch((function(e){return e}))}}]),e}(),O=(a(48),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={news:[]},a.generateNews=function(){return a.state.news.map((function(e){return r.a.createElement(N,{key:e._id,title:e.title,date:e.date,description:e.description})}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.getAllNews().then((function(t){return e.setState({news:t})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.news.length?this.generateNews():r.a.createElement(v,null))}}]),t}(n.Component)),S=a(29),C=a.n(S),B=(a(60),function(e){var t=e.story,a=t.type,n=t.title,o=t.chapter_title,s=t.content,c=t.authors.map((function(e,t){return r.a.createElement("span",{className:"story__author",key:t},e)}));return r.a.createElement("article",{className:"story"},r.a.createElement("small",null,"story"===a?n+" / "+o:"".concat(n," (").concat(a,")")),r.a.createElement("h3",{className:"story__title"},"story"===a?o:n),r.a.createElement("div",{className:"story__content"},C()(s)),r.a.createElement("p",{className:"story__authors"},c),"story"===a?r.a.createElement("p",null,'"pagination"'):r.a.createElement("p",null,'"no-pagination"'))}),x=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={story:[]},a.fetchNewStory=function(){var e=a.props.match.params.id;b.getStoryById(e).then((function(e){return a.setState({story:e})}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchNewStory()}},{key:"componentDidUpdate",value:function(e,t){this.props.match.params.id!==e.match.params.id&&this.fetchNewStory()}},{key:"render",value:function(){var e=this.state.story;return r.a.createElement(r.a.Fragment,null,e._id?r.a.createElement(B,{story:e}):r.a.createElement(v,null))}}]),t}(n.Component),I=function(e){var t=e.id,a=e.title,n=e.chapter_title,o=e.visible,s=e.handleDeleteStory;return r.a.createElement("div",{className:"storyListItem"},r.a.createElement("button",{className:"listBtn"},r.a.createElement(g.a,{icon:o?"eye":"eye-slash"})),r.a.createElement("p",{className:"storyListItem__title"},n||a),r.a.createElement("p",{className:"storyListItem__title small"},n?"(".concat(a,")"):"(one-shot)"),r.a.createElement("button",{className:"listBtn"},r.a.createElement(g.a,{icon:"edit"})),r.a.createElement("button",{className:"listBtn",value:t,onClick:s},r.a.createElement(g.a,{icon:"trash"})))},A=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={stories:[]},a.generateStoriesList=function(){return a.state.stories.map((function(e){return r.a.createElement(I,{key:e._id,id:e._id,title:e.title,chapter_title:e.chapter_title,visible:e.visible,handleDeleteStory:a.handleDeleteStory})}))},a.handleDeleteStory=function(e){e.preventDefault();var t=e.target.value;console.log(t),b.deleteStoryById(t).then((function(e){return console.log(e)}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.getStoriesByAuthor(this.props.author).then((function(t){return e.setState({stories:t})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"adminStories"},r.a.createElement("h3",null,"Twoja tw\xf3rczo\u015b\u0107"),this.state.stories.length>0?this.generateStoriesList():r.a.createElement(v,null)))}}]),t}(n.Component);function D(e){e.preventDefault(),k.deleteNewsById(e.target.value).then((function(e){return console.log(e)}))}var F=function(e){var t=e.title,a=e.date,n=e.id,o=new Date(a);return r.a.createElement("div",{className:"newsListItem"},r.a.createElement("div",{className:"newsListItem__title"},r.a.createElement("h4",null,t),r.a.createElement("p",{className:"small"},o.toLocaleDateString())),r.a.createElement("button",{className:"listBtn"},r.a.createElement(g.a,{icon:"edit"})),r.a.createElement("button",{className:"listBtn",value:n,onClick:D},r.a.createElement(g.a,{icon:"trash"})))},M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={news:[]},a.generateNews=function(){return a.state.news.map((function(e){return r.a.createElement(F,{key:e.date,title:e.title,date:e.date,id:e._id})}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.getAllNews().then((function(t){return e.setState({news:t})}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"adminNews"},r.a.createElement("h3",null,"News"),this.state.news.length>0?this.generateNews():r.a.createElement(v,null)))}}]),t}(n.Component),U=(a(61),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"adminPanel"},r.a.createElement("h3",{className:"adminName"},this.state.user),r.a.createElement(A,{author:this.state.user}),r.a.createElement(M,null)))}}]),t}(n.Component)),H=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user:"Admin"},a.checkPermission=function(){return localStorage.getItem("state")},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{render:function(){return e.checkPermission()?r.a.createElement(U,{user:e.state.user}):r.a.createElement(w.a,{to:"/sensitive-cra/login/",permission:e.checkPermission})}}))}}]),t}(n.Component),L=a(31),z=a(30),P=(a(25),function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={login:"",pass:"",errors:{login:!1,pass:!1}},a.messages={login_incorrect:"Nazwa musi by\u0107 d\u0142u\u017csza ni\u017c 4 znaki i nie mo\u017ce zawiera\u0107 spacji",email_incorrect:"Brak @ w emailu",password_incorrect:"Has\u0142o musi mie\u0107 od 8 do 20 znak\xf3w"},a.handleInputChange=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(z.a)({},t,n))},a.handleSubmit=function(e){e.preventDefault();var t=a.formValidation();t.correct?(fetch("".concat(y.baseCorsUrl,"login/").concat(a.state.login,".").concat(a.state.pass)).then((function(e){if(e.ok)return e.json();throw new Error("error ",e.status)})).then((function(e){Object(L.a)(e,1)[0]?(a.setState({message:"Logowanie poprawne",loading:!1,alert:!1}),localStorage.setItem("state","login"),a.props.history.push({pathname:"/sensitive-cra/admin",user:a.state.login})):a.setState({message:"B\u0142\u0119dny login lub has\u0142o",loading:!1,alert:!0})})).catch((function(e){return console.log(e)})),a.setState({loading:!0,errors:{login:!1,pass:!1}})):a.setState({errors:{login:!t.login,pass:!t.password}})},a.formValidation=function(){var e=!1,t=!1,n=!1;return a.state.login.length>=4&&-1===a.state.login.indexOf(" ")&&(e=!0),a.state.pass.length>=8&&a.state.pass.length<=20&&(t=!0),e&&t&&(n=!0),{correct:n,login:e,password:t}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"form myForm",onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("h2",null,"Panel logowania"),r.a.createElement("div",{className:"form__field"},r.a.createElement("input",{type:"text",name:"login",id:"login",className:this.state.errors.login?"form__input invalidate":this.state.login.length>0?"form__input filled":"form__input",value:this.state.login,onChange:this.handleInputChange}),r.a.createElement("label",{htmlFor:"login",className:"form__label"},"Login"),this.state.errors.login&&r.a.createElement("span",{className:"form__alert"},this.messages.login_incorrect)),r.a.createElement("div",{className:"form__field"},r.a.createElement("input",{type:"password",name:"pass",id:"pass",className:this.state.errors.pass?"form__input invalidate":this.state.pass.length>0?"form__input filled":"form__input",value:this.state.pass,onChange:this.handleInputChange}),r.a.createElement("label",{htmlFor:"pass",className:"form__label"},"Has\u0142o"),this.state.errors.pass&&r.a.createElement("span",{className:"form__alert"},this.messages.password_incorrect)),r.a.createElement("button",{className:"btn form__button"},"Zaloguj")),r.a.createElement("aside",{className:"otherInformation"},this.state.loading&&r.a.createElement(v,null),this.state.message&&r.a.createElement("h3",{className:this.state.alert?"form__alert":"form__confirmation"},this.state.message)))}}]),t}(n.Component)),V=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={redirect:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;localStorage.removeItem("state","login"),setTimeout((function(){return e.setState({redirect:!0})}),500)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.b,{render:function(){return e.state.redirect?r.a.createElement(w.a,{to:"/sensitive-cra/"}):r.a.createElement("div",null,r.a.createElement("h3",null,"Wylogowano"),r.a.createElement(v,null))}}))}}]),t}(n.Component),W=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Ooops! Some Error Here"))},J=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.d,null,r.a.createElement(w.b,{path:"/sensitive-cra/",exact:!0,component:O}),r.a.createElement(w.b,{path:"/sensitive-cra/story/:id",component:x}),r.a.createElement(w.b,{path:"/sensitive-cra/admin",component:H}),r.a.createElement(w.b,{path:"/sensitive-cra/login",component:P}),r.a.createElement(w.b,{path:"/sensitive-cra/logout",component:V}),r.a.createElement(w.b,{component:W})))},T=(a(62),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Sensitive"))});a(63);p.b.add(f.d,f.h,f.i,f.f,f.e,f.b,f.c,f.g,f.a);var Z=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={lightMode:!1},a.handleColorMode=function(){a.setState((function(e){return{lightMode:!e.lightMode}}))},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement("div",{className:this.state.lightMode?"appContainer light-mode":"appContainer"},r.a.createElement("nav",{className:"navigation"},r.a.createElement(_,{changeColor:this.handleColorMode,lightMode:this.state.lightMode})),r.a.createElement("header",{className:"banner"},r.a.createElement(d,null)),r.a.createElement("main",{className:"mainContainer"},r.a.createElement(J,null)),r.a.createElement("footer",{className:"footer"},r.a.createElement(T,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.238f11f3.chunk.js.map